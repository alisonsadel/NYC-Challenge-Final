<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" type="image/png" sizes="76x76" href="{{ url_for('static', filename= '/img/apple-icon.png') }}">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename= '/img/favicon.png') }}">
  <title>
    NYC Real Estate Model
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename= '/css/nucleo-icons.css') }}"/>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename= '/css/nucleo-svg.css') }}" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename= '/css/nucleo-svg.css') }}" />
  <!-- CSS Files -->
  <link rel="stylesheet" type="text/css" id="pagestyle" href="{{ url_for('static', filename= '/css/soft-ui-dashboard.css') }}" />
</head>

<body class="g-sidenav-show  bg-gray-100">
  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-left ms-3" id="sidenav-main">
    <div class="sidenav-header">
      <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute right-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
      <a class="navbar-brand m-0" href="../pages/dashboard.html">
        <img src="{{url_for('static', filename='/img/logo-ct.png') }}" class="navbar-brand-img h-100 w-15" alt="...">
        <span class="ms-1 font-weight-bold">NYC Real Estate Predictor</span>
      </a>
    </div>
    <hr class="horizontal dark mt-0">
    <div class="collapse navbar-collapse  w-auto" id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link  active" href="{{ url_for('about') }}">
            <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <svg width="12px" height="12px" viewBox="0 0 45 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <title>shop </title>
                <g id="Basic-Elements" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g id="Rounded-Icons" transform="translate(-1716.000000, -439.000000)" fill="#FFFFFF" fill-rule="nonzero">
                    <g id="Icons-with-opacity" transform="translate(1716.000000, 291.000000)">
                      <g id="user-friends" transform="translate(0.000000, 148.000000)">
                        <path class="color-background" d="M46.7199583,10.7414583 L40.8449583,0.949791667 C40.4909749,0.360605034 39.8540131,0 39.1666667,0 L7.83333333,0 C7.1459869,0 6.50902508,0.360605034 6.15504167,0.949791667 L0.280041667,10.7414583 C0.0969176761,11.0460037 -1.23209662e-05,11.3946378 -1.23209662e-05,11.75 C-0.00758042603,16.0663731 3.48367543,19.5725301 7.80004167,19.5833333 L7.81570833,19.5833333 C9.75003686,19.5882688 11.6168794,18.8726691 13.0522917,17.5760417 C16.0171492,20.2556967 20.5292675,20.2556967 23.494125,17.5760417 C26.4604562,20.2616016 30.9794188,20.2616016 33.94575,17.5760417 C36.2421905,19.6477597 39.5441143,20.1708521 42.3684437,18.9103691 C45.1927731,17.649886 47.0084685,14.8428276 47.0000295,11.75 C47.0000295,11.3946378 46.9030823,11.0460037 46.7199583,10.7414583 Z" id="Path" opacity="0.598981585"></path>
                        <path class="color-background" d="M39.198,22.4912623 C37.3776246,22.4928106 35.5817531,22.0149171 33.951625,21.0951667 L33.92225,21.1107282 C31.1430221,22.6838032 27.9255001,22.9318916 24.9844167,21.7998837 C24.4750389,21.605469 23.9777983,21.3722567 23.4960833,21.1018359 L23.4745417,21.1129513 C20.6961809,22.6871153 17.4786145,22.9344611 14.5386667,21.7998837 C14.029926,21.6054643 13.533337,21.3722507 13.0522917,21.1018359 C11.4250962,22.0190609 9.63246555,22.4947009 7.81570833,22.4912623 C7.16510551,22.4842162 6.51607673,22.4173045 5.875,22.2911849 L5.875,44.7220845 C5.875,45.9498589 6.7517757,46.9451667 7.83333333,46.9451667 L19.5833333,46.9451667 L19.5833333,33.6066734 L27.4166667,33.6066734 L27.4166667,46.9451667 L39.1666667,46.9451667 C40.2482243,46.9451667 41.125,45.9498589 41.125,44.7220845 L41.125,22.2822926 C40.4887822,22.4116582 39.8442868,22.4815492 39.198,22.4912623 Z" id="Path"></path>
                      </g>
                    </g>
                  </g>
                </g>
              </svg>
            </div>
            <span class="nav-link-text ms-1">About</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link  active" href="{{ url_for('dashboard') }}">
            <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <svg width="12px" height="12px" viewBox="0 0 45 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <title>shop </title>
                <g id="Basic-Elements" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g id="Rounded-Icons" transform="translate(-1716.000000, -439.000000)" fill="#FFFFFF" fill-rule="nonzero">
                    <g id="Icons-with-opacity" transform="translate(1716.000000, 291.000000)">
                      <g id="shop-" transform="translate(0.000000, 148.000000)">
                        <path class="color-background" d="M46.7199583,10.7414583 L40.8449583,0.949791667 C40.4909749,0.360605034 39.8540131,0 39.1666667,0 L7.83333333,0 C7.1459869,0 6.50902508,0.360605034 6.15504167,0.949791667 L0.280041667,10.7414583 C0.0969176761,11.0460037 -1.23209662e-05,11.3946378 -1.23209662e-05,11.75 C-0.00758042603,16.0663731 3.48367543,19.5725301 7.80004167,19.5833333 L7.81570833,19.5833333 C9.75003686,19.5882688 11.6168794,18.8726691 13.0522917,17.5760417 C16.0171492,20.2556967 20.5292675,20.2556967 23.494125,17.5760417 C26.4604562,20.2616016 30.9794188,20.2616016 33.94575,17.5760417 C36.2421905,19.6477597 39.5441143,20.1708521 42.3684437,18.9103691 C45.1927731,17.649886 47.0084685,14.8428276 47.0000295,11.75 C47.0000295,11.3946378 46.9030823,11.0460037 46.7199583,10.7414583 Z" id="Path" opacity="0.598981585"></path>
                        <path class="color-background" d="M39.198,22.4912623 C37.3776246,22.4928106 35.5817531,22.0149171 33.951625,21.0951667 L33.92225,21.1107282 C31.1430221,22.6838032 27.9255001,22.9318916 24.9844167,21.7998837 C24.4750389,21.605469 23.9777983,21.3722567 23.4960833,21.1018359 L23.4745417,21.1129513 C20.6961809,22.6871153 17.4786145,22.9344611 14.5386667,21.7998837 C14.029926,21.6054643 13.533337,21.3722507 13.0522917,21.1018359 C11.4250962,22.0190609 9.63246555,22.4947009 7.81570833,22.4912623 C7.16510551,22.4842162 6.51607673,22.4173045 5.875,22.2911849 L5.875,44.7220845 C5.875,45.9498589 6.7517757,46.9451667 7.83333333,46.9451667 L19.5833333,46.9451667 L19.5833333,33.6066734 L27.4166667,33.6066734 L27.4166667,46.9451667 L39.1666667,46.9451667 C40.2482243,46.9451667 41.125,45.9498589 41.125,44.7220845 L41.125,22.2822926 C40.4887822,22.4116582 39.8442868,22.4815492 39.198,22.4912623 Z" id="Path"></path>
                      </g>
                    </g>
                  </g>
                </g>
              </svg>
            </div>
            <span class="nav-link-text ms-1">Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link  active">
            <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
              <svg width="12px" height="12px" viewBox="0 0 45 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <title>shop </title>
                <g id="Basic-Elements" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g id="Rounded-Icons" transform="translate(-1716.000000, -439.000000)" fill="#FFFFFF" fill-rule="nonzero">
                    <g id="Icons-with-opacity" transform="translate(1716.000000, 291.000000)">
                      <g id="user-friends" transform="translate(0.000000, 148.000000)">
                        <path class="color-background" d="M46.7199583,10.7414583 L40.8449583,0.949791667 C40.4909749,0.360605034 39.8540131,0 39.1666667,0 L7.83333333,0 C7.1459869,0 6.50902508,0.360605034 6.15504167,0.949791667 L0.280041667,10.7414583 C0.0969176761,11.0460037 -1.23209662e-05,11.3946378 -1.23209662e-05,11.75 C-0.00758042603,16.0663731 3.48367543,19.5725301 7.80004167,19.5833333 L7.81570833,19.5833333 C9.75003686,19.5882688 11.6168794,18.8726691 13.0522917,17.5760417 C16.0171492,20.2556967 20.5292675,20.2556967 23.494125,17.5760417 C26.4604562,20.2616016 30.9794188,20.2616016 33.94575,17.5760417 C36.2421905,19.6477597 39.5441143,20.1708521 42.3684437,18.9103691 C45.1927731,17.649886 47.0084685,14.8428276 47.0000295,11.75 C47.0000295,11.3946378 46.9030823,11.0460037 46.7199583,10.7414583 Z" id="Path" opacity="0.598981585"></path>
                        <path class="color-background" d="M39.198,22.4912623 C37.3776246,22.4928106 35.5817531,22.0149171 33.951625,21.0951667 L33.92225,21.1107282 C31.1430221,22.6838032 27.9255001,22.9318916 24.9844167,21.7998837 C24.4750389,21.605469 23.9777983,21.3722567 23.4960833,21.1018359 L23.4745417,21.1129513 C20.6961809,22.6871153 17.4786145,22.9344611 14.5386667,21.7998837 C14.029926,21.6054643 13.533337,21.3722507 13.0522917,21.1018359 C11.4250962,22.0190609 9.63246555,22.4947009 7.81570833,22.4912623 C7.16510551,22.4842162 6.51607673,22.4173045 5.875,22.2911849 L5.875,44.7220845 C5.875,45.9498589 6.7517757,46.9451667 7.83333333,46.9451667 L19.5833333,46.9451667 L19.5833333,33.6066734 L27.4166667,33.6066734 L27.4166667,46.9451667 L39.1666667,46.9451667 C40.2482243,46.9451667 41.125,45.9498589 41.125,44.7220845 L41.125,22.2822926 C40.4887822,22.4116582 39.8442868,22.4815492 39.198,22.4912623 Z" id="Path"></path>
                      </g>
                    </g>
                  </g>
                </g>
              </svg>
            </div>
            <select id="tables" name="tables" text="Tables" onchange="location = this.value;">
              <option value="" disabled selected>Select Data Table</option>
              <option value="realestate">Real Estate</option>
              <option value="crimes">Crimes</option>
              <option value="brownfields">Brownfields</option>
              <option value="elementaryschools">Elementary Schools</option>
              <option value="middleschools">Middle Schools</option>
              <option value="highschools">High Schools</option>
              <option value="subwaystations">Subway Stations</option>
              <option value="restaurants">Restaurants</option>
              <option value="trees">Trees</option>
              <option value="walkability">Walkability</option>
          </select>
          </a>
        </li>
    </div>
  </aside>
  <main class="main-content mt-1 border-radius-lg">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur" navbar-scroll="true">
      <div class="container-fluid py-1 px-3">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="javascript:;">Pages</a></li>
            <li class="breadcrumb-item text-sm text-dark active" aria-current="page">About</li>
          </ol>
          <h6 class="font-weight-bolder mb-0">About</h6>
        </nav>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
          <ul class="navbar-nav  justify-content-end">
            <li class="nav-item d-xl-none ps-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0" id="iconNavbarSidenav">
                <div class="sidenav-toggler-inner">
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                </div>
              </a>
            </li>
            <li class="nav-item px-3 d-flex align-items-center">
                        </div>
                    </div>
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
      
      <div class="row my-4">
        <div class="col-lg-12 col-md-12 mb-md-0 mb-4">
          <div class="card">
            <div class="card-header pb-0">
                <h2>About This Project</h6>
                    <br>
                    <h4>Machine Learning - NYC Real Estate Valuations</h6>
                    <h6>Overview</h6>
                    <p>
                        <strong>Group Members:</strong> Stephen Brescher, Shadee Tabasi, Alison Sadel, Manny Mejia
                        <br>
                        The datasets created and utilized for our analysis and visualizations took data on New York City (crime, education, environment, socio-economic, subway-access) filtered by zipcode. After initial exploratory analysis and cleaning, we decided to move foward with a Linear Regression and Random Forest Machine Learning Models. 
                    </p>
                    <h6>Technologies</h6>
                    Back End:
                    <ul>
                        <li>Pandas</li>
                        <li>SQL-Alchemy</li>
                        <li>SQL</li>
                        <li>Numpy</li>
                        <li>sklearn.preprocessing [oneHotEncoder]</li>
                        <li>scipy.stats</li>
                        <li>geopy[distance]</li>
                        <li>geopy.geocoders(Nominatim]</li>
                        <li>geopy.exc[GeoCoderTimedOut]</li>
                        <li>geopy.extra.rate_limiter[RateLimiter]</li>
                        <li>geopandas</li>
                        <li>tqdm</li>
                        <li>tqdm.pandas()</li>
                        <li>sklearn.neighbnors</li>
                        <li>tqd</li>
                        <li>datetime</li>
                        <li>tqdm_notebook</li>
                        <li>Flask</li>
                    </ul>
                    Front End:
                    <ul>
                        <li>Javascript</li>
                        <li>Leaflet</li>
                        <li>HTML</li>
                        <li>CSS</li>
                        <li>Bootstrap</li>
                        <li>Plotly Express</li>
                    </ul>
 
                    <p>#import libraries and dependencies
                    <br>
                    from sklearn import tree
                    <br>
                    from sklearn.model_selection import train_test_split
                    <br>
                    from sklearn.impute import SimpleImputer
                    <br>
                    from sklearn.ensemble import RandomForestClassifier
                    <br>
                    import numpy as np
                    <br>
                    import pandas as pd
                    <br>
                    import os
                    <br>
                    from dotenv import load_dotenv
                    <br>
                    from sqlalchemy import create_engine
                    </p>

                    <h6>Extract</h6>
                    NEED TO LINK SOURCES OF DATA

                    <h6>Transform</h6>

### General clean up
  * ``str.lower()`` to convert all strings to lowercase
  * Rename columns to eliminate spaces and capitalization
  * Drop irrelevant columns
   * ``df[df.columns.difference([])``
  * Merge duplicative column values with slightly different naming conventions with ``.replace({})`` 
  * Drop all rows where zipcode column contained NaN values
  ``df = df.dropna(subset=['zipcode'])``
  * Datatype Conversion
  ``df['column_name'] = df['column_name'].astype('')``
   

### NYC Brownfields Data Set
  * Use ``str.contains()`` method to remove all records that were outside New York City (original dataset was for NY State brownfield records)
  * Use strip method combined with a slicer to ensure zipcodes were exactly five characters in length
   ``df['zipcode'] = df['zipcode'].str[:5]``
  * Group status of the clean-up site using ``str.replace()`` method - data has different rating scale depending on funding of the clean up project so some descriptions could be merged.
  * Generate binary values using ``pd.get_dummies`` on health status:
     * Potential Threat
     * Completed - Maintenance Required - Continued Threat
     * Completed - Clean - No Further Action
     * Active - Significant Threat
     * Active - Mild Threat
 ```
 # Generate binary values using get_dummies for danger level
 dum_df1 = pd.get_dummies(df, columns=["danger_level"], prefix=["danger_level_is"] )
 ```

### NYC Crime Data Set
* Remove all complaint that were records before 2020
``df = df[df['Start_Date'].str.contains("2020", na=False)] ``
* Ensure that each complaint_id value was unique
``df = df.drop_duplicates(subset=['complaint_id'])``
* Convert complaint_date to datetime
``df.complaint_date = pd.to_datetime(df.complaint_date, format='%m/%d/%Y')``
* Create a column to denote if the danger level is low or high
  ```
  # Create empty column
  df["danger_level"] = ""
  
  # Assign specific complaint descriptions as having a higher danger level based on the gravity of the crime
  df.loc[df["complaint_desc"] == 'sex crimes', "danger_level"] = 'high' 
  df.loc[df["complaint_desc"] == 'rape', "danger_level"] = 'high' 
  df.loc[df["complaint_desc"] == 'dangerous weapons', "danger_level"] = 'high' 
  df.loc[df["complaint_desc"] == 'felony sex crimes', "danger_level"] = 'high'
  df.loc[df["complaint_desc"] == 'burglary', "danger_level"] = 'high' 
  df.loc[df["complaint_desc"] == 'robbery', "danger_level"] = 'high' 
  df.loc[df["complaint_desc"] == 'arson', "danger_level"] = 'high' 
  
  # Fill all empty values in the newly created 'danger_level' column with NaNs and use fillna() to create high/low dichotomy 
  df['danger_level'] = df['danger_level'].replace('', np.nan, regex=True)
  df['danger_level'] = df['danger_level'].fillna('low')
  ```

* Generate binary values using ``pd.get_dummies`` on category of crime (violation, misdemeanor and felony) and on newly created feature - whether the crime is defined as violent and therefore the danger level is higher:

### NYC School Rankings (Elementary, Middle, High) Datasets
* Drop all rows where county is not the Bronx, Brooklyn, Richmond, Queens and/or New York County
 ```
 # Filter out any counties outside NYC 5 Boroughs
 elem['county'].value_counts()
 elem = elem[elem['county'].str.contains("Richmond County|New York|Brooklyn|Kings County|Queens|Bronx")]

 # Reclassify inaccurate column values by replacing School District assignment with county that district is located in
 elem.loc[elem['county'].str.contains('7|8|9|10|11|12'), 'county'] = 'Bronx County'
 elem.loc[elem['county'].str.contains('13|14|17|21|22|24|27'), 'county'] = 'Kings County'
 elem.loc[elem['county'].str.contains('3|4|5|6'), 'county'] = 'New York County'
 ```

* Create a new feature and corresponding classification for Generating Binary Values for School Rankings relative to the State rankings
  * ``Use pd.cut( )`` method to bin School Rankings into Top 25th, 50th Percentile, 75th Percentile and Bottom 25th Percentile
  * Use``pd.get_dummies`` on the newly created feature (binned school rankings)
* Create a new feature and corresponding classification for generating binary values on a schools free lunch recipient status
  * Within NYC 72% of students are eligible for discounted or free lunch
  * Use ``np.where`` method to create Boolean column - true denotes that at that school the percentage of those eligible for subsidized food is greater than 72%
    * True denotes greater that the  72% of students are eligible for free lunch
    ``elem['lunch_eligibity_high'] = np.where(elem['free_lunch_recipient'] > 72, True, False)``
  * Use``pd.get_dummies`` on the newly created feature showcasing if the school was above the city average in student eligibility of subsidized breakfast/lunch
   

### NYC Tree Dataset

* Strip out the month and day values to leave only the year the tree was planted
```
# Ensure date planted only reflects the year planted
df['year_planted'] = pd.DatetimeIndex(df['created_at']).year
```
* Add Categorical Encoding & Binary Values for the heath status of the tree - good, fair, poor, dead
```
# Convert type of columns to 'category'
df['health'] = df['health'].astype('category')

# Assign numerical values and store in another column
df['health_level'] = df['health'].cat.codes

# Create instance of OneHotEncoder
enc1 = OneHotEncoder(handle_unknown='ignore')

# Pass tree health category column (label encoded values of health_status)
enc_df1 = pd.DataFrame(enc1.fit_transform(df[['health_level']]).toarray())

# Merge with main df on key values
df = df.join(enc_df1)

# Rename columns that were added from encoder array
df[[0, 1, 2, 3]] = df[[0, 1, 2, 3]].astype(str)
df = df.rename(columns={0: 'health_level_dead', 1: 'health_level_fair', 2: 'health_level_good', 3: 'health_level_poor'}) 
```

                </p>
            
                    </div>
            <div class="card-header pb-0">
              <div class="row">
                <div class="col-lg-6 col-7">
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="col-lg-4 col-md-6">
          <div class="card h-100">
            <div class="card-header pb-0">
              <h6>Placeholder</h6>
                <div id="map" style="height: 500px"></div>
                  </div>
                </div>
              </div> -->
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </main>
  </div>
  <!--   Core JS Files   -->
  <script type="text/javascript" src="{{ url_for('static', filename='/js/core/popper.min.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='/js/core/bootstrap.min.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='/js/plugins/smooth-scrollbar.min.js') }}"></script>


  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script type="text/javascript" src="{{ url_for('static', filename= '/js/soft-ui-dashboard.min.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename= '/js/plugins/chartjs.min.js') }}"></script>
  <script type="text/javascriptsrc=" src="{{ url_for('static', filename= 'js/plugins/Chart.extension.js') }}"></script>

  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>

  
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
</body>

</html>